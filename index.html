<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FILMIXO Premium movie access</title>
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    
    <link rel="preload" as="image" href="https://raw.githubusercontent.com/Filmixo/movie/refs/heads/main/Image Files/FILMIXO-HUB.jpg" fetchpriority="high">

    <style>
        /* --- ‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶ï‡ßç‡¶∞‡¶æ‡¶∂‡¶ø‡¶Ç ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, system-ui, sans-serif; text-decoration: none; }
        body { background-color: #ffffff; display: flex; justify-content: center; -webkit-tap-highlight-color: transparent; scroll-behavior: smooth; }
        
        /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶≠‡¶ø‡¶ú‡¶ø‡¶¨‡¶ø‡¶≤‡¶ø‡¶ü‡¶ø ‡¶Ö‡¶™‡ßç‡¶ü‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® */
        .main-container { background-color: white; width: 100%; max-width: 600px; min-height: 100vh; border-left: 1px solid #ddd; border-right: 1px solid #ddd; position: relative; contain: layout; }

        /* ‡¶∏‡ßç‡¶≤‡¶æ‡¶á‡¶°‡¶æ‡¶∞ (CLS ‡¶∞‡ßã‡¶ß‡ßá Aspect Ratio ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶°) */
        .cover-photo { width: 100%; aspect-ratio: 18/9; position: relative; overflow: hidden; background: #000; contain: strict; }
        .intro-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 6; font-size: 36px; font-weight: 900; letter-spacing: 12px; color: #fff; text-shadow: 0 0 12px rgba(29,161,242,0.8); pointer-events: none; white-space: nowrap; }

        /* ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶è‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ */
        .profile-header-area { position: relative; padding: 0 15px; display: flex; justify-content: space-between; align-items: flex-start; height: 75px; }
        .profile-pic-container { margin-top: -70px; z-index: 2; width: 140px; height: 140px; }
        .profile-pic { width: 100%; height: 100%; border-radius: 50%; border: 4px solid white; background-color: #000; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .profile-pic img { width: 100%; height: 100%; object-fit: cover; }

        .btn { border: none; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: bold; color: white; cursor: pointer; display: flex; align-items: center; gap: 5px; margin-top: 10px; }
        .btn-email { background-color: #1da1f2; }
        .btn-share { background-color: #000; }

        .info-section { padding: 15px; contain: content; }
        .website-name { font-size: 22px; font-weight: 800; color: #1c1e21; display: inline-flex; align-items: center; gap: 5px; }
        .username { font-size: 15px; color: #1da1f2; margin-bottom: 8px; }
        .stats { display: flex; gap: 10px; font-size: 13.5px; margin-bottom: 8px; font-weight: 600; }
        .bio { font-size: 15px; color: #0f1419; line-height: 1.4; }

        /* ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® (Sticky optimization) */
        .nav-bar { display: flex; justify-content: space-between; padding: 10px 5px; border-top: 1px solid #eee; border-bottom: 1px solid #eee; background: #fff; position: sticky; top: 0; z-index: 100; }
        .nav-btn { flex: 1; text-align: center; padding: 8px; margin: 0 4px; border-radius: 20px; font-size: 13px; font-weight: bold; cursor: pointer; border: 1px solid #eee; transition: 0.2s; }
        .nav-btn.active { background-color: #000; color: white; border-color: #000; }

        /* ‡¶´‡¶ø‡¶° ‡¶ó‡ßç‡¶∞‡¶ø‡¶° (Rendering Performance) */
        #feed-container { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 12px; 
            padding: 12px; 
            min-height: 500px;
            content-visibility: auto;
        }
        .post-card { background: white; display: flex; flex-direction: column; overflow: hidden; transition: transform 0.2s; }
        
        /* ‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶∏‡¶™‡ßá‡¶ï‡ßç‡¶ü ‡¶∞‡ßá‡¶∂‡¶ø‡¶ì ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
        .media-container { 
            position: relative; 
            width: 100%; 
            aspect-ratio: 16/9; 
            border-radius: 8px; 
            background: #f0f2f5; 
            overflow: hidden; 
        }
        .media-container img { width: 100%; height: 100%; object-fit: cover; display: block; }
        
        .post-title { font-size: 13px; font-weight: 700; color: #0f1419; margin: 8px 0; height: 34px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }

        /* ‡¶≤‡ßã‡¶°‡¶æ‡¶∞ */
        #sentinel { width: 100%; height: 80px; display: flex; align-items: center; justify-content: center; grid-column: span 2; }
        .wave-loader div { width: 8px; height: 8px; background-color: #1da1f2; border-radius: 50%; display: inline-block; animation: bounce 1.2s infinite; margin: 0 2px; }
        @keyframes bounce { 0%, 100% { transform: scale(0); } 50% { transform: scale(1); } }

        /* ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶∏‡¶Æ‡ßÅ‡¶π */
        #search-overlay, #login-view { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 1001; display: none; flex-direction: column; }
    </style>
</head>
<body>

    <div class="main-container">
        <div id="cover-slider" class="cover-photo">
            <div class="intro-text">FILMIXO</div>
        </div>

        <div class="profile-header-area">
            <div class="profile-pic-container">
                <div class="profile-pic">
                    <img src="https://raw.githubusercontent.com/Filmixo/movie/refs/heads/main/Image Files/filmixo.jpg" alt="Logo" width="140" height="140">
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-email" onclick="window.location.href='mailto:contact@filmixo.com'"><i class="fa-solid fa-envelope"></i> Email</button>
                <button class="btn btn-share" onclick="shareProfile()"><i class="fa-solid fa-share-nodes"></i> Share</button>
            </div>
        </div>

        <div class="info-section">
            <h1 class="website-name">FILMIXO-HUB <i class="fa-solid fa-circle-check" style="color:#1da1f2; font-size:15px;"></i></h1>
            <p class="username">@filmixo</p>
            <div class="stats">
                <span>Videos <b id="total-videos-count">0</b></span> ‚Ä¢ 
                <span>Views <b id="total-views-count">0</b></span>
            </div>
            <p class="bio">üçø Your ultimate HD movie hub. Download exclusive releases instantly. Stop scrolling, seize the cinema.</p>
        </div>

        <nav class="nav-bar">
            <div class="nav-btn active" id="nav-home" onclick="showFeed()">Home</div>
            <div class="nav-btn" onclick="window.location.href='https://google.com'">Sign Up</div>
            <div class="nav-btn" onclick="showLogin()">Login</div>
            <div class="nav-btn" onclick="showSearch()">Search</div>
        </nav>
        
        <div id="feed-container"></div>
        
        <div id="sentinel">
            <div class="wave-loader"><div></div><div></div><div></div></div>
        </div>

        <footer class="site-footer" id="main-footer" style="padding: 20px; text-align: center; border-top: 1px solid #eee; display:none;">
            <p style="font-size: 12px; color: #666;">¬© 2026 filmixo.com. All rights reserved.</p>
        </footer>
    </div>

    <div id="search-overlay">
        <div style="padding: 15px; display: flex; align-items: center; gap: 10px;">
            <button onclick="hideSearch()" style="border:none; background:none; font-size: 20px;"><i class="fa-solid fa-arrow-left"></i></button>
            <input type="text" id="search-input" placeholder="Search movies..." style="flex:1; padding: 10px; border-radius: 20px; border: 1px solid #ddd; outline: none;">
        </div>
        <div id="search-results" style="padding: 15px; overflow-y: auto;"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getFirestore, doc, onSnapshot, getDocs, collection } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyCAsD8wucLsudzY5oNbiixLGyjN2apdV0Q", authDomain: "my-ad-analytics-4560a.firebaseapp.com", projectId: "my-ad-analytics-4560a" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let allPosts = [];
        let currentIndex = 0;
        const BATCH_SIZE = 10;

        // ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶≤‡¶ú‡¶ø‡¶ï (Fragment ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá)
        function renderPosts(postsToRender) {
            const container = document.getElementById('feed-container');
            const fragment = document.createDocumentFragment();

            postsToRender.forEach(post => {
                const card = document.createElement('div');
                card.className = 'post-card';
                card.innerHTML = `
                    <div class="media-container" onclick="window.location.href='/movie/post.html?id=${post.id}'">
                        <img src="${post.mediaImage}" loading="lazy" width="280" height="157" alt="${post.title}">
                        <div style="position:absolute; bottom:5px; right:5px; background:rgba(0,0,0,0.7); color:#fff; font-size:10px; padding:2px 5px; border-radius:3px;">${post.videoDuration}</div>
                    </div>
                    <div class="post-title">${post.title}</div>
                    <div style="font-size:11px; color:#666; display:flex; justify-content:space-between;">
                        <span><i class="fa-solid fa-eye"></i> <span id="v-${post.id}">0</span></span>
                        <span>${new Date(post.uploadTime).toLocaleDateString('en-GB')}</span>
                    </div>
                `;
                fragment.appendChild(card);
                
                // ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤‡¶ü‡¶æ‡¶á‡¶Æ ‡¶≠‡¶ø‡¶â ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï (‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶•‡ßç‡¶∞‡ßá‡¶°‡ßá)
                setTimeout(() => {
                    onSnapshot(doc(db, "views", post.id), (s) => {
                        const vEl = document.getElementById(`v-${post.id}`);
                        if(vEl) vEl.innerText = s.data()?.count || 0;
                    });
                }, 100);
            });
            container.appendChild(fragment);
        }

        async function init() {
            try {
                const res = await fetch('posts.json');
                allPosts = await res.json();
                allPosts.sort((a, b) => new Date(b.uploadTime) - new Date(a.uploadTime));
                
                document.getElementById('total-videos-count').innerText = allPosts.length;
                
                // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ö ‡¶≤‡ßã‡¶°
                const firstBatch = allPosts.slice(0, BATCH_SIZE);
                renderPosts(firstBatch);
                currentIndex = BATCH_SIZE;

                // ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶á‡¶®‡¶´‡¶ø‡¶®‡¶ø‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤
                const observer = new IntersectionObserver((entries) => {
                    if (entries[0].isIntersecting && currentIndex < allPosts.length) {
                        const nextBatch = allPosts.slice(currentIndex, currentIndex + BATCH_SIZE);
                        renderPosts(nextBatch);
                        currentIndex += BATCH_SIZE;
                    }
                }, { rootMargin: '300px' });
                observer.observe(document.getElementById('sentinel'));

                document.getElementById('main-footer').style.display = 'block';
            } catch (e) { console.error(e); }
        }

        window.shareProfile = () => {
            if (navigator.share) navigator.share({ title: 'FILMIXO', url: window.location.href });
        };

        window.showSearch = () => { document.getElementById('search-overlay').style.display = 'flex'; document.getElementById('search-input').focus(); };
        window.hideSearch = () => { document.getElementById('search-overlay').style.display = 'none'; };

        init();
    </script>
</body>
</html>
