<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <!-- Viewport Optimization -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">  
    <title>FILMIXO | Professional Movie Insights & HD Downloads</title>  
    <meta name="description" id="dynamic-desc" content="FILMIXO: Expert movie reviews, Director & Actor insights, and technical analysis (VFX/Audio). Watch trailers and download HD movies.">
    <meta name="keywords" content="expert movie review, filmixo analysis, vfx review, director insights, audience reaction, movie download, hd movies">
    <meta name="author" content="FILMIXO Editorial Team">
    <meta property="og:type" content="video.movie">
    <meta property="og:site_name" content="FILMIXO">
    <meta property="og:title" id="og-title" content="FILMIXO | Professional Movie Insights & HD Downloads">
    <meta property="og:description" id="og-desc" content="Explore research-based reviews and technical breakdowns of the latest films. Quality and Accuracy guaranteed.">
    <meta property="og:image" content="https://raw.githubusercontent.com/Filmixo/movie/refs/heads/main/Image Files/filmixo.jpg">
    <script type="application/ld+json" id="dynamic-schema"></script>
    
    <!-- Preconnect to domains -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://prototypesorting.com">
    <link rel="preconnect" href="https://www.gstatic.com">

    <!-- FontAwesome: Loaded asynchronously to prevent render block -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" media="print" onload="this.media='all'">

    <style>  
    /* CSS Optimization: Removed Opacity 0 and improved speed */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; text-decoration: none; }  
    body { display: flex; justify-content: center; -webkit-tap-highlight-color: transparent; background: #fff; }  
    
    .main-wrapper { width: 100%; max-width: 600px; min-height: 100vh; background: #fff; position: relative; border-left: 1px solid #eee; border-right: 1px solid #eee; margin: 0 auto; display: block; }  

    header { background: #1da1f2; padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; color: white; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }  
    .logo-area { font-weight: 900; font-size: 23px; text-transform: uppercase; line-height: 1; display: flex; align-items: center; }  
    .header-btn { background: white; color: #1da1f2; padding: 6px 15px; border-radius: 15px; font-weight: bold; font-size: 12px; margin-left: 5px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; }  

    .ad-box { width: 100%; min-height: 50px; overflow: hidden; margin: 5px 0; display: block; background: #f9f9f9; }
    .ad-box iframe { width: 100%; border: none; overflow: hidden; display: block; } 
    .dual-ad-wrapper { display: flex; justify-content: center; gap: 8px; padding: 2px 15px; width: 100%; }
    .dual-ad-wrapper .ad-box { flex: 1; width: 50%; }

    .video-container { position: relative; width: 94%; margin: 5px auto; aspect-ratio: 16/9; background: #000; overflow: hidden; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    .video-container img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .play-btn-center { position: absolute; width: 60px; height: 60px; background: rgba(0,0,0,0.6); border-radius: 50%; border: 3px solid #fff; display: flex; align-items: center; justify-content: center; z-index: 5; pointer-events: none; }
    .play-btn-center::after { content: ''; border-left: 20px solid white; border-top: 12px solid transparent; border-bottom: 12px solid transparent; margin-left: 5px; }
    .main-video-spinner { display: none; position: absolute; width: 40px; height: 40px; border: 4px solid rgba(255, 255, 255, 0.3); border-top: 4px solid #fff; border-radius: 50%; animation: spin 1s linear infinite; z-index: 6; }
    
    .video-controls { position: absolute; bottom: 0; left: 0; width: 100%; height: 35px; padding: 0 10px; display: flex; align-items: center; background: rgba(0, 0, 0, 0.5); z-index: 10; color: white; font-size: 11px; }
    .v-divider { width: 1px; height: 12px; background: rgba(255,255,255,0.4); margin: 0 8px; }
    .prog-bg { flex-grow: 1; height: 6px; background: rgba(255, 255, 255, 0.5); border-radius: 4px; margin: 0 10px; }
    .prog-fill { width: 1.5%; height: 100%; background: #ff0000; border-radius: 4px; }
    .hd-badge { background: #ffad1f; color: #000; padding: 1px 4px; border-radius: 3px; font-size: 9px; font-weight: 900; }
    
    .video-container.is-loading .video-controls, .video-container.is-loading .play-btn-center { display: none; }
    .video-container.is-loading .main-video-spinner { display: block; }

    .post-author-area { padding: 8px 15px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #e1e8ed; }  
    .author-info { display: flex; align-items: center; gap: 10px; }  
    .pfp { width: 45px; height: 45px; border-radius: 50%; overflow: hidden; background: #ddd; }  
    .pfp img { width: 100%; height: 100%; object-fit: cover; }  
    .author-text h3 { font-size: 18px; margin: 0; color: #0f1419; display: inline-flex; align-items: center; gap: 5px; }  
    .author-text span { font-size: 12px; color: #1da1f2; display: block; }  
    .post-time { font-size: 14px; color: #536471; font-weight: bold; }  

    .content-body { padding: 5px 15px; }  
    .article-title { font-size: 18px; font-weight: 800; margin-bottom: 8px; color: #0f1419; line-height: 1.3; }  
    .article-para { font-size: 14px; line-height: 1.4; color: #1c1e21; margin: 8px 0; }
        
    .youtube-embed-wrapper { position: relative; width: 100%; padding-bottom: 56.25%; height: 0; margin-bottom: 5px; background: #000; display: none; }
    .youtube-embed-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

    .download-title-text { font-size: 18px; font-weight: 800; color: #0f1419; text-align: center; margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; }  
    .download-buttons-container { padding: 15px 0; display: flex; gap: 8px; }  
    .download-btn-v2 { flex: 1; padding: 12px 5px; border-radius: 6px; text-align: center; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 11px; font-weight: 900; }

    .stats-section { padding: 10px 0; border-top: 1px solid #eee; display: flex; align-items: center; justify-content: space-between; color: #536471; }  
    .view-stat { display: flex; align-items: center; gap: 4px; font-size: 14px; }  
    .love-btn { cursor: pointer; display: flex; align-items: center; gap: 4px; font-size: 14px; }  
    .love-btn.liked { color: #e0245e; } 

    .share-icons { display: flex; gap: 6px; }  
    .share-icon { width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 11px; }  

    .site-footer { padding: 20px 10px; text-align: center; border-top: 1px solid #eee; }  
    .footer-links { display: flex; justify-content: center; gap: 12px; margin-bottom: 10px; flex-wrap: wrap; }  
    .footer-links a { color: #536471; font-size: 12px; }  
    
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>
</head>  
<body>  

<template id="ad-src-top"><script>atOptions={'key':'caf6ea59dc8711a1d0bfb5ad9dd98638','format':'iframe','height':90,'width':728,'params':{}};</script><script src="https://prototypesorting.com/caf6ea59dc8711a1d0bfb5ad9dd98638/invoke.js"></script></template>
<template id="ad-src-title"><script>atOptions={'key':'da9154b956691d2aa7c677010e7b6501','format':'iframe','height':60,'width':468,'params':{}};</script><script src="https://prototypesorting.com/da9154b956691d2aa7c677010e7b6501/invoke.js"></script></template>
<template id="ad-src-p1"><script>atOptions={'key':'dbae51ad68fb44f5c8a6b535812c9f54','format':'iframe','height':250,'width':300,'params':{}};</script><script src="https://prototypesorting.com/dbae51ad68fb44f5c8a6b535812c9f54/invoke.js"></script></template>
<template id="ad-src-p2"><script>atOptions={'key':'54012419216a1778423343e5706cb92e','format':'iframe','height':300,'width':160,'params':{}};</script><script src="https://prototypesorting.com/54012419216a1778423343e5706cb92e/invoke.js"></script></template>
<template id="ad-src-mid"><script async="async" data-cfasync="false" src="https://prototypesorting.com/1608cb6a976841a38e804d64801334bb/invoke.js"></script><div id="container-1608cb6a976841a38e804d64801334bb"></div></template>
<template id="ad-src-video"><script>atOptions={'key':'dbae51ad68fb44f5c8a6b535812c9f54','format':'iframe','height':250,'width':300,'params':{}};</script><script src="https://prototypesorting.com/dbae51ad68fb44f5c8a6b535812c9f54/invoke.js"></script></template>

<div class="main-wrapper" id="app-wrapper">  
    <header>  
        <div class="logo-area"><i class="fa-solid fa-clapperboard" style="margin-right: 8px;"></i>FILMIXO</div>
        <div>  
            <button class="header-btn" onclick="window.location.href='https://prototypesorting.com/dkhpkccgup?key=f93978b429dfbcf244b3718ef67223ef'" aria-label="Tutorial Video"><i class="fa-solid fa-circle-play" style="margin-right: 5px;"></i>Tutorial Vdo</button>
            <button class="header-btn" onclick="window.location.href='index.html'" aria-label="Home"><i class="fa-solid fa-house" style="margin-right: 5px;"></i>Home</button>
        </div>  
    </header>  

    <div id="post-details-container">
        <!-- Skeleton loader or basic structure for faster FCP -->
    </div>  

    <footer class="site-footer">  
        <div class="footer-links"> 
            <a href="about.html">About Us</a> 
            <a href="contact.html">Contact Us</a> 
            <a href="privacy.html">Privacy Policy</a> 
            <a href="terms.html">Terms</a> 
        </div>  
        <div class="footer-copyright">Copyright © 2026 <a href="index.html">filmixo.com</a></div>  
    </footer>  
</div>  

<!-- Moved Heavy Scripts to Footer -->
<script src="https://prototypesorting.com/8e/8f/e0/8e8fe0bd662ff02c455fafbcaf1c9369.js" async></script>

<script type="module">  
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";  
    import { getFirestore, doc, getDoc, setDoc, increment, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";  
  
    const firebaseConfig = { apiKey: "AIzaSyCAsD8wucLsudzY5oNbiixLGyjN2apdV0Q", authDomain: "my-ad-analytics-4560a.firebaseapp.com", projectId: "my-ad-analytics-4560a", storageBucket: "my-ad-analytics-4560a.firebasestorage.app", messagingSenderId: "104213283950", appId: "1:104213283950:web:b5a25ecd54df809625127f" };  
    const app = initializeApp(firebaseConfig);  
    const db = getFirestore(app);  
    
    const deviceId = localStorage.getItem('deviceId') || ('id-' + Math.random().toString(36).substr(2, 9));
    localStorage.setItem('deviceId', deviceId);

    const urlParams = new URLSearchParams(window.location.search);  
    const postId = urlParams.get('id');  
    const CONFIG = { GLOBAL_VIDEO_LINK: "https://prototypesorting.com/p99vwjq2?key=57217116cccb25526dfb6a5a4edd9aea" };  

    const STAY_TIME = 5000; 
    let pendingTask = null; let blurTimestamp = 0;

    // --- SEO Logic (UNTOUCHED) ---
    const generatePremiumSEO = (post) => {
        if (!post) return;
        const getCleanMovieName = (title) => title.split(/[,.\-|:_\(\)\[\]]|\bfull\b|\bdownload\b|\b202\d\b|\b1080p\b|\b720p\b/i)[0].trim();
        const getSeed = (id) => { let hash = 0; for (let i = 0; i < id.length; i++) hash = id.charCodeAt(i) + ((hash << 5) - hash); return Math.abs(hash); };
        const seed = getSeed(post.id);
        const movieName = getCleanMovieName(post.title);
        const fullTitle = `${post.title} | Official Review & Download - FILMIXO`;
        const rawDesc = post.paragraphs?.[0] || "Expert movie reviews and HD downloads on FILMIXO.";
        const cleanDesc = rawDesc.substring(0, 160).replace(/["]/g, '') + "...";
        const formattedDate = post.uploadTime?.includes('T') ? post.uploadTime : `${post.uploadTime || new Date().toISOString()}T09:00:00+06:00`;
        const randomRating = (4.6 + (seed % 5) / 10).toFixed(1);
        const randomVotes = Math.floor((seed % 2000000) + 500000);
        document.title = fullTitle;
        const schemaData = { "@context": "https://schema.org", "@graph": [ { "@type": "Movie", "name": movieName, "image": [post.mediaImage], "description": rawDesc, "aggregateRating": { "@type": "AggregateRating", "ratingValue": randomRating, "ratingCount": randomVotes.toString() } } ] };
        let s = document.getElementById('dynamic-schema'); if(s) s.textContent = JSON.stringify(schemaData);
    };

    function formatCount(n) { return n >= 1e6 ? (n/1e6).toFixed(1)+'M' : n >= 1e3 ? (n/1e3).toFixed(1)+'K' : n || 0; }  
    function timeAgo(s) { const d=new Date(s), n=new Date(), sec=Math.floor((n-d)/1000); if(sec<60)return 'Just now'; const min=Math.floor(sec/60); if(min<60)return min+'m ago'; const hr=Math.floor(min/60); if(hr<24)return hr+'h ago'; return Math.floor(hr/24)+'d ago'; }

    // Optimization: Delayed Ad Injection to improve TBT
    function injectAd(tid, cid) {
        const t = document.getElementById(tid), c = document.getElementById(cid);
        if (!t || !c) return;
        setTimeout(() => {
            const iframe = document.createElement('iframe');
            iframe.style.width = '100%'; iframe.style.height = '60px'; iframe.style.border = 'none';
            c.appendChild(iframe);
            const doc = iframe.contentWindow.document;
            doc.open(); doc.write(`<html><body style="margin:0;display:flex;justify-content:center;">${t.innerHTML}</body></html>`); doc.close();
        }, 2000); // লোড হওয়ার ২ সেকেন্ড পর অ্যাড আসবে যাতে পারফরম্যান্স ভালো থাকে
    }

    function renderPost(post) {  
        const paras = post.paragraphs || [];
        let bodyContent = "";
        paras.forEach((p, i) => {
            bodyContent += `<p class="article-para">${p}</p>`;
            if(i === 0) bodyContent += `<div id="ad-box-p1" class="ad-box"></div>`;
            if(i === 1) bodyContent += `<div class="dual-ad-wrapper"><div id="ad-box-p2-l" class="ad-box"></div><div id="ad-box-p2-r" class="ad-box"></div></div>`;
        });

        document.getElementById('post-details-container').innerHTML = `
            <div class="post-author-area">
                <div class="author-info">
                    <div class="pfp"><img src="https://raw.githubusercontent.com/Filmixo/movie/refs/heads/main/Image Files/filmixo.jpg" alt="FILMIXO Profile"></div>
                    <div class="author-text"><h3>FILMIXO <i class="fa-solid fa-circle-check" style="color:#1da1f2;font-size:15px"></i></h3><span>@filmixo</span></div>
                </div>
                <div class="post-time">${timeAgo(post.uploadTime)}</div>
            </div>
            <div id="ad-box-top" class="ad-box"></div>
            <div class="video-container" onclick="handleVideoClick()" aria-label="Play Trailer">
                <img src="${post.mediaImage}" id="main-img" alt="${post.title} Poster" fetchpriority="high">
                <div class="play-btn-center"></div><div class="main-video-spinner"></div>
                <div class="video-controls">
                    <span>${post.videoDuration}</span><div class="v-divider"></div>
                    <div class="prog-bg"><div class="prog-fill"></div></div><span class="hd-badge">HD</span>
                </div>
            </div>
            <div class="content-body">
                <h1 class="article-title">${post.title}</h1>
                <div id="ad-box-title" class="ad-box"></div>
                ${bodyContent}
                <div class="download-title-text">↕️ Download Full Movie HD ↕️</div>
                <div class="download-buttons-container">
                    <div onclick="handleDownloadClick('b1','${post.id}','${post.adLink1}','${post.adLink2}')" class="download-btn-v2" style="background:linear-gradient(180deg, #D32F2F, #B71C1C)">1080P FULL HD</div>
                    <div onclick="handleDownloadClick('b2','${post.id}','${post.adLink1}','${post.adLink2}')" class="download-btn-v2" style="background:linear-gradient(180deg, #1976D2, #0D47A1)">720P HD</div>
                </div>
                <div class="stats-section">
                    <div class="view-stat"><i class="fa-solid fa-chart-simple"></i> <span id="v-cnt">0</span> Views</div>
                    <div class="love-btn"><i class="fa-regular fa-heart"></i> <span id="l-cnt">0</span></div>
                    <div class="share-icons">
                        <div class="share-icon" style="background:#1877f2" onclick="sh('fb')"><i class="fa-brands fa-facebook-f"></i></div>
                        <div class="share-icon" style="background:#25d366" onclick="sh('wa')"><i class="fa-brands fa-whatsapp"></i></div>
                    </div>
                </div>
            </div>`;

        // Load ads after initial render
        requestIdleCallback(() => {
            injectAd('ad-src-top', 'ad-box-top');
            injectAd('ad-src-title', 'ad-box-title');
            injectAd('ad-src-p1', 'ad-box-p1');
            injectAd('ad-src-p2', 'ad-box-p2-l');
            injectAd('ad-src-p2', 'ad-box-p2-r');
        });
    }

    async function init() {
        try {
            const res = await fetch('posts.json');
            const data = await res.json();
            const post = data.find(p => p.id === postId) || data[0];
            generatePremiumSEO(post); 
            renderPost(post);
            setupFirebase(post.id);
        } catch (e) { console.log(e); }
    }

    function setupFirebase(id) {
        setDoc(doc(db, "views", id), { count: increment(1) }, { merge: true });
        onSnapshot(doc(db, "views", id), s => { if(document.getElementById('v-cnt')) document.getElementById('v-cnt').innerText = formatCount(s.data()?.count); });
        const lRef = doc(db, "loves", id), lBtn = document.querySelector('.love-btn');
        onSnapshot(lRef, s => { if(document.getElementById('l-cnt')) document.getElementById('l-cnt').innerText = formatCount(s.data()?.count); });
        lBtn.onclick = async () => { lBtn.classList.add('liked'); await setDoc(lRef, {count:increment(1)}, {merge:true}); };
    }

    window.handleVideoClick = () => {
        document.querySelector('.video-container').classList.add('is-loading');
        setTimeout(() => { location.href = CONFIG.GLOBAL_VIDEO_LINK; }, 200);
    };

    init();
</script>  
</body>  
</html>
